# 变量声明
## `var`和`let`的区别
很多同学基本上没有注意到`var`和`let`的区别在哪里，以为两个只是命名不一样而已，包括之前的我。但是实际上他们两者是有很大的不同的，主要体现在作用域上面。下面我们看例子比较容易说明：
```typescript
function fn(shouldInitialize: boolean) {
  if (shouldInitialize) {
    var x = 10
  }
  return x;
}
fn(true); // 10
fn(false); // undefined
```
我们发现变量其实是定义在`if`语句里面的，但是我们却可以在语句外面使用他。这是因为`var`声明，可以在声明的函数，模块，命名空间或全局作用域内部任何位置被访问。
但是当用`let`声明一个变量，它使用的是词法作用域或块作用域。不同于使用`var`声明的变量那样可以在包含它们的块作用域外访问，块作用域变量在包含它们的块或者`for`循环之外是不能访问的。
```typescript
function f(input: boolean) {
    let a = 100;

    if (input) {
        // Still okay to reference 'a'
        let b = a + 1;
        return b;
    }

    // Error: 'b' doesn't exist here
    return b;
}
```
这里我们定义了2个变量`a`和`b`。 `a`的作用域是`f`函数体内，而`b`的作用域是`if`语句块里。
拥有块级作用域的变量的另一个特点是，它们必须先声明再读写。
## 重定义及屏蔽
使用`var`定义变量的时候，无论声明多少次，你只会得到一个。
```typescript
function f(x) {
    var x;
    var x;

    if (true) {
        var x;
    }
}
```
上面这段代码是有效的，但是`let`就不一样了。
```typescript
let x = 10;
let x = 20; // 错误，不能在1个作用域里多次声明`x`
```
```typescript
function f(x) {
    let x = 100; // error: 与函数参数变量名重了
}

function g() {
    let x = 100;
    var x = 100; // error: can't have both declarations of 'x'
}
```